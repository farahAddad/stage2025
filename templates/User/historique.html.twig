<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="fr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
   
    <link rel="apple-touch-icon" href="../../../app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="../../../app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i%7COpen+Sans:300,300i,400,400i,600,600i,700,700i" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="../../../app-assets/vendors/css/vendors.min.css">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/components.css">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/core/menu/menu-types/vertical-overlay-menu.css">
    <link rel="stylesheet" type="text/css" href="../../../app-assets/css/core/colors/palette-gradient.css">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="../../../assets/css/style.css">
    <!-- END: Custom CSS-->

</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-overlay-menu 2-columns fixed-navbar" data-open="click" data-menu="vertical-overlay-menu" data-col="2-columns">

{% include 'User/navBar.html.twig' %}

<!-- BEGIN: Content-->
<div class="app-content content">
    <div class="content-wrapper">
        <div class="content-header row">
            <div class="content-header-left col-md-6 col-12 mb-2">
                <h3 class="content-header-title">Mon Historique</h3>
                <p class="text-muted">Historique de vos formations et activités</p>
            </div>
        </div>
        
        <div class="content-body">
            <!-- Historique des Formations -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Historique des Formations</h4>
                        </div>
                        <div class="card-content">
                            <div class="card-body">
                                {% if inscriptions is empty %}
                                    <div class="text-center py-4">
                                        <i class="icon-calendar font-large-2 text-muted"></i>
                                        <h5 class="mt-2">Aucune formation</h5>
                                        <p class="text-muted">Vous n'avez participé à aucune formation pour le moment.</p>
                                    </div>
                                {% else %}
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Formation</th>
                                                    <th>Session</th>
                                                    <th>Date de début</th>
                                                    <th>Date de fin</th>
                                                    <th>Lieu</th>
                                                    <th>Statut Session</th>
                                                    <th>Statut Participation</th>
                                                    <th>Date Validation</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for inscription in inscriptions %}
                                                    {% set session = inscription.session %}
                                                    {% set formation = session.formation %}
                                                    <tr>
                                                        <td>
                                                            <strong>{{ formation.sujet }}</strong>
                                                        </td>
                                                        <td>{{ session.titre }}</td>
                                                        <td>{{ session.dateDebut|date('d/m/Y H:i') }}</td>
                                                        <td>{{ session.dateFin|date('d/m/Y H:i') }}</td>
                                                        <td>
                                                            {% if session.salle %}
                                                                {{ session.salle.nom }}
                                                            {% else %}
                                                                {{ session.emplacement }}
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            {% if session.status == 'en cours' %}
                                                                <span class="badge badge-warning">À valider ta inscription</span>
                                                            {% elseif session.status == 'terminé' %}
                                                                <span class="badge badge-success">Terminé</span>
                                                            {% elseif session.status == 'créée' %}
                                                                <span class="badge badge-info">Créée</span>
                                                            {% elseif session.status == 'annulée' %}
                                                                <span class="badge badge-danger">Annulée</span>
                                                            {% else %}
                                                                <span class="badge badge-secondary">{{ session.status|title }}</span>
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            {% if inscription.statutParticipation == 'en attente' %}
                                                                <span class="badge badge-warning">En attente</span>
                                                            {% elseif inscription.statutParticipation == 'accepté' %}
                                                                <span class="badge badge-success">Accepté</span>
                                                            {% elseif inscription.statutParticipation == 'absence de validation' %}
                                                                <span class="badge badge-danger">Absence de validation</span>
                                                            {% else %}
                                                                <span class="badge badge-secondary">{{ inscription.statutParticipation|title }}</span>
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            {% if inscription.dateValidation %}
                                                                {{ inscription.dateValidation|date('d/m/Y H:i') }}
                                                            {% else %}
                                                                <span class="text-muted">-</span>
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historique des Notifications -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Historique des Notifications</h4>
                        </div>
                        <div class="card-content">
                            <div class="card-body">
                                {% if notifications is empty %}
                                    <div class="text-center py-4">
                                        <i class="icon-bell font-large-2 text-muted"></i>
                                        <h5 class="mt-2">Aucune notification</h5>
                                        <p class="text-muted">Vous n'avez reçu aucune notification pour le moment.</p>
                                    </div>
                                {% else %}
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Type</th>
                                                    <th>Titre</th>
                                                    <th>Message</th>
                                                    <th>Statut</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for notification in notifications %}
                                                    <tr>
                                                        <td>{{ notification.dateCreation|date('d/m/Y H:i') }}</td>
                                                        <td>
                                                            {% if notification.type == 'formation' %}
                                                                <span class="badge badge-primary">Formation</span>
                                                            {% elseif notification.type == 'inscription' %}
                                                                <span class="badge badge-success">Inscription</span>
                                                            {% elseif notification.type == 'validation' %}
                                                                <span class="badge badge-info">Validation</span>
                                                            {% elseif notification.type == 'rappel' %}
                                                                <span class="badge badge-warning">Rappel</span>
                                                            {% elseif notification.type == 'annulation' %}
                                                                <span class="badge badge-danger">Annulation</span>
                                                            {% else %}
                                                                <span class="badge badge-secondary">{{ notification.type|title }}</span>
                                                            {% endif %}
                                                        </td>
                                                        <td><strong>{{ notification.titre }}</strong></td>
                                                        <td>{{ notification.message }}</td>
                                                        <td>
                                                            {% if notification.lu %}
                                                                <span class="badge badge-success">Lu</span>
                                                            {% else %}
                                                                <span class="badge badge-warning">Non lu</span>
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END: Content-->

<!-- BEGIN: Footer-->
<footer class="footer footer-static footer-light navbar-border navbar-shadow">
    <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2">
        <span class="float-md-left d-block d-md-inline-block">Copyright &copy; 2024 <a class="text-bold-800 grey darken-2" href="#" target="_blank">Formation Manager</a>, All rights reserved. </span>
        <span class="float-md-right d-none d-lg-block">Espace Participant <i class="icon-heart5 pink"></i></span>
    </p>
</footer>
<!-- END: Footer-->

<!-- BEGIN: Vendor JS-->
<script src="../../../app-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
<!-- BEGIN Vendor JS-->

<!-- BEGIN: Theme JS-->
<script src="../../../app-assets/js/core/app-menu.js" type="text/javascript"></script>
<script src="../../../app-assets/js/core/app.js" type="text/javascript"></script>
<!-- END: Theme JS-->



</body>
<!-- END: Body-->

</html> 